# <a id="top"> 包装类型 <a/>

## 思考

> [是否了解 `JavaScript` 中的包装类型？](#answer)

包装类型

在 `ES` 中， 数据的分类分别为**基础数据类型**和**引用类型**。

按照最新 ES 标准定义， 基础数据类型 ：`string、 number、 symbol、 string、 undefined、 null`

引用类型包括 `Object、 Array、 Date、 RegExp` 等。

基础数据类型和引用类型这两个类型其中一个很明显的区别是， 引用类型有自己内置的方法，也可以自定义其他方法用操作数据，而基本数据类型不能像引用数据类型那样有自己的内置方法对数据进行更多的操作。

但基本数据类型真的就不能使用方法吗？ 对于部分基本类型来说确实是这样的。

但是有三个是 ES 提供了对应的特殊引用类型（包装类型） `Boolean、 Number、 String`

基本包装类型，和其他引用类型一样， 拥有内置的方法可以对数据进行额外操作。 如下：

```js
var str = 'hello'; // string 基本类型
var s2 = str.charAt(0);
console.log(s2); // h
```
上面的 `string` 是一个基本类型， 但是它却能调用 `chartAt()` 的方法

其主要的因为在执行第二行代码时， 后台会自动进行下面的步骤：

1、自动创建 `String` 类型的一个实例（和基本类型的值不同，这个实例就是一个基本包装类型的对象）

2、调用实例（对象）上指定的方法

3、销毁这个实例

用代码的方式解释就是如下：

```js
// 我们平常写程序的过程：
var str = 'hello'; // string 基本类型
var s2 = str.charAt(0); // 执行到这一句的时候 后台会自动完成以下作用；
{
    var _str = new String('hello'); // 1 找到对应的包装对象类型， 然后通过包装对象创建出一个和基本类型值相同的对象
    
    var s2 = _str.charAt(0); 2 // 然后这个对象就可以调用包装对象下的方法， 并且返回结果给s2
    _str = null;
}
console.log(s2); // h
console.log(str); // hello
```

基本类型的值虽然没有方法可以调用， 但是后台临时创建的包装对象上有内置方法可以让我们调用方法， 因此这样我们就可以对字符串、数值、布尔值这三种基本数据类型的数据进行更多操作。

而什么时候后台会自动创建一个对应的基本包装类型的对象， 取决于当前执行的代码是否是为了获取他的值。

每当读取一个基本类型的值，也就是当我们需要从内容中获取到他的值时（这个访问过程为读取模式）， 这时后台就会自动创建一个节本包装类型的对象。 例如：

```js
var i = 1;
i.test = 'hello';
console.log(i.test); // undefined

// 当执行以上代码的时候， 实际上后台执行了以下的操作：
var _i = new Number(1);
_i.test = 'hello';
_i.test = null;

// 如果直接声明的时候就是包装对象类型
// 那么是可以添加属性的方法的，因为是一个对象
var i = new Number(1);
i.test = 'hello';
console.log(i.test); // hello
```
怎么才能给基本类型添加方法或者属性呢？

```js
// 每个对象都有原型, 挂载到原型上
var i = 1;
Number.prototype.test = 'Hello';
console.log(i.test); // Hello
```


> <a id="answer">是否了解 `JavaScript` 中的包装类型？</a>
>
> 参考答案：
> 
> 包装对象，就是当基本类型以对象的方式去使用时，`JavaScript` 会转换成对应的包装类型， 相当与 `new` 一个对象，内容和基本类型的内容一样， 然后当操作完成再去访问的时候， 这个临时对象会被销毁， 然后再访问的时候就是 `undefined`
>
> number、 string、 boolean 都有对应的包装类型
>
> 因为有了基本包装类型， 所以 JavaScript 中的基本类型值可以被当做对象来访问。
> 
> 基本类型特征：
>
> 1、每个包装类型都被映射到同名的基本类型
>
> 2、在读取模式下访问基本类型值时， 就会被创建对应的基本包装类型的一个对象，从而方便了数据操作
>
> 3、操作基本类型值的语句一经执行完毕， 就会立即摧毁新创建的包装对象 


[顶部](#top)








